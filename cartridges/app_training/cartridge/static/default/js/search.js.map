{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./cartridges/app_training/cartridge/client/default/js/components/focus.js","webpack:///./cartridges/app_training/cartridge/client/default/js/product/base.js","webpack:///./cartridges/app_training/cartridge/client/default/js/product/quickView.js","webpack:///./cartridges/app_training/cartridge/client/default/js/search.js","webpack:///./cartridges/app_training/cartridge/client/default/js/search/search.js","webpack:///./cartridges/app_training/cartridge/client/default/js/util.js"],"names":["module","exports","setTabNextFocus","focusParams","KEYCODE_TAB","isTabPressed","event","key","keyCode","firstFocusableEl","$","containerSelector","firstElementSelector","lastFocusableEl","lastElementSelector","is","nextToLastElementSelector","length","linkElements","shiftKey","focus","preventDefault","focusHelper","require","getPidValue","$el","pid","hasClass","closest","find","data","text","getQuantitySelector","getQuantitySelected","val","processSwatchValues","attr","$productContainer","msgs","values","forEach","attrValue","$attrValue","id","value","$swatchButton","parent","selected","addClass","siblings","assistiveSelectedText","removeClass","empty","url","removeAttr","selectable","processNonSwatchValues","$attr","$defaultOption","resetUrl","updateAttrs","attrs","attrsWithSwatches","indexOf","updateAvailability","response","availabilityValue","availabilityMessages","product","availability","messages","readyToOrder","resources","info_selectforstock","message","trigger","getAttributesHtml","attributes","html","attributeGroup","ID","attribute","label","updateOptions","optionsHtml","createCarousel","imgs","carousel","carouselId","append","i","alt","parseInt","index","title","appendTo","first","detach","handleVariantResponse","isChoiceOfBonusProducts","parents","isVaraint","variationAttributes","productType","primaryImageUrls","images","large","$priceSelector","replaceWith","price","promotionsHtml","$selectButton","updateQuantities","quantities","map","quantity","join","attributeSelect","selectedValueUrl","container","ajax","method","success","spinner","stop","error","getAddToCartUrl","parseHtml","$html","parseHTML","body","footer","children","chooseBonusProducts","start","remove","bonusUrl","bonusChoiceRuleBased","showProductsUrlRuleBased","showProductsUrlListBased","htmlString","maxBonusItems","uuid","pliUUID","addToCartUrl","pageSize","labels","selectprods","dataType","parsedHtml","renderedTemplate","enterDialogMessage","closeButtonText","modal","handlePostCartAdd","messageType","newBonusDiscountLineItem","Object","keys","setTimeout","getChildProducts","childProducts","each","push","JSON","stringify","getOptions","options","$elOption","urlValue","selectedValueId","optionId","toArray","miniCartReportingUrl","methods","editBonusProducts","focusChooseBonusProductModal","on","onClosingChooseBonusProductModal","trapChooseBonusProductModalFocus","e","colorAttribute","document","selectAttribute","currentTarget","addToCart","pidsObj","setPids","qty","form","reportingURL","selectBonusProduct","$choiceOfBonusProduct","maxPids","submittedQty","totalQty","optionID","valueId","selectedBonusProductHtml","removeBonusProduct","$selected","count","enableBonusProductSelection","available","showMoreBonusProducts","addBonusProductsToCart","$readyToOrderBonusProducts","queryString","pidsObject","bonusProducts","qtyOption","option","productId","errorMessage","msgSuccess","location","reload","base","getModalHtmlElement","fillModalElement","quickViewFullDetailMsg","productUrl","showQuickview","target","focusQuickview","trapQuickviewFocus","showSpinner","hideDialog","beforeUpdateAttribute","updateAttribute","selectedProductUrl","updateAddToCart","dialog","allAvailable","every","item","allReady","processInclude","ready","updateDom","$results","selector","$updates","handleRefinements","activeDiv","className","replace","parseResults","specialHandlers","getContent","$element","$target","showMoreUrl","updateSortOptions","$tempDom","sortOptions","filter","show","closeRefinements","hide","resize","window","sort","selectedUrl","showMore","stopPropagation","applyFilter","page","showContentTab","include"],"mappings":"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","file":"default\\js\\search.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./cartridges/app_training/cartridge/client/default/js/search.js\");\n","'use strict';\n\nmodule.exports = {\n    setTabNextFocus: function (focusParams) {\n        var KEYCODE_TAB = 9;\n        var isTabPressed = (focusParams.event.key === 'Tab' || focusParams.event.keyCode === KEYCODE_TAB);\n\n        if (!isTabPressed) {\n            return;\n        }\n\n        var firstFocusableEl = $(focusParams.containerSelector + ' ' + focusParams.firstElementSelector);\n        var lastFocusableEl = $(focusParams.containerSelector + ' ' + focusParams.lastElementSelector);\n\n        if ($(focusParams.containerSelector + ' ' + focusParams.lastElementSelector).is(':disabled')) {\n            lastFocusableEl = $(focusParams.containerSelector + ' ' + focusParams.nextToLastElementSelector);\n            if ($('.product-quickview.product-set').length > 0) {\n                var linkElements = $(focusParams.containerSelector + ' a#fa-link.share-icons');\n                lastFocusableEl = linkElements[linkElements.length - 1];\n            }\n        }\n\n        if (focusParams.event.shiftKey) /* shift + tab */ {\n            if ($(':focus').is(firstFocusableEl)) {\n                lastFocusableEl.focus();\n                focusParams.event.preventDefault();\n            }\n        } else /* tab */ {\n            if ($(':focus').is(lastFocusableEl)) { // eslint-disable-line\n                firstFocusableEl.focus();\n                focusParams.event.preventDefault();\n            }\n        }\n    }\n};\n","'use strict';\nvar focusHelper = require('../components/focus');\n\n/**\n * Retrieves the relevant pid value\n * @param {jquery} $el - DOM container for a given add to cart button\n * @return {string} - value to be used when adding product to cart\n */\nfunction getPidValue($el) {\n    var pid;\n\n    if ($('#quickViewModal').hasClass('show') && !$('.product-set').length) {\n        pid = $($el).closest('.modal-content').find('.product-quickview').data('pid');\n    } else if ($('.product-set-detail').length || $('.product-set').length) {\n        pid = $($el).closest('.product-detail').find('.product-id').text();\n    } else {\n        pid = $('.product-detail:not(\".bundle-item\")').data('pid');\n    }\n\n    return pid;\n}\n\n/**\n * Retrieve contextual quantity selector\n * @param {jquery} $el - DOM container for the relevant quantity\n * @return {jquery} - quantity selector DOM container\n */\nfunction getQuantitySelector($el) {\n    return $el && $('.set-items').length\n        ? $($el).closest('.product-detail').find('.quantity-select')\n        : $('.quantity-select');\n}\n\n/**\n * Retrieves the value associated with the Quantity pull-down menu\n * @param {jquery} $el - DOM container for the relevant quantity\n * @return {string} - value found in the quantity input\n */\nfunction getQuantitySelected($el) {\n    return getQuantitySelector($el).val();\n}\n\n/**\n * Process the attribute values for an attribute that has image swatches\n *\n * @param {Object} attr - Attribute\n * @param {string} attr.id - Attribute ID\n * @param {Object[]} attr.values - Array of attribute value objects\n * @param {string} attr.values.value - Attribute coded value\n * @param {string} attr.values.url - URL to de/select an attribute value of the product\n * @param {boolean} attr.values.isSelectable - Flag as to whether an attribute value can be\n *     selected.  If there is no variant that corresponds to a specific combination of attribute\n *     values, an attribute may be disabled in the Product Detail Page\n * @param {jQuery} $productContainer - DOM container for a given product\n * @param {Object} msgs - object containing resource messages\n */\nfunction processSwatchValues(attr, $productContainer, msgs) {\n    attr.values.forEach(function (attrValue) {\n        var $attrValue = $productContainer.find('[data-attr=\"' + attr.id + '\"] [data-attr-value=\"' +\n            attrValue.value + '\"]');\n        var $swatchButton = $attrValue.parent();\n\n        if (attrValue.selected) {\n            $attrValue.addClass('selected');\n            $attrValue.siblings('.selected-assistive-text').text(msgs.assistiveSelectedText);\n        } else {\n            $attrValue.removeClass('selected');\n            $attrValue.siblings('.selected-assistive-text').empty();\n        }\n\n        if (attrValue.url) {\n            $swatchButton.attr('data-url', attrValue.url);\n        } else {\n            $swatchButton.removeAttr('data-url');\n        }\n\n        // Disable if not selectable\n        $attrValue.removeClass('selectable unselectable');\n\n        $attrValue.addClass(attrValue.selectable ? 'selectable' : 'unselectable');\n    });\n}\n\n/**\n * Process attribute values associated with an attribute that does not have image swatches\n *\n * @param {Object} attr - Attribute\n * @param {string} attr.id - Attribute ID\n * @param {Object[]} attr.values - Array of attribute value objects\n * @param {string} attr.values.value - Attribute coded value\n * @param {string} attr.values.url - URL to de/select an attribute value of the product\n * @param {boolean} attr.values.isSelectable - Flag as to whether an attribute value can be\n *     selected.  If there is no variant that corresponds to a specific combination of attribute\n *     values, an attribute may be disabled in the Product Detail Page\n * @param {jQuery} $productContainer - DOM container for a given product\n */\nfunction processNonSwatchValues(attr, $productContainer) {\n    var $attr = '[data-attr=\"' + attr.id + '\"]';\n    var $defaultOption = $productContainer.find($attr + ' .select-' + attr.id + ' option:first');\n    $defaultOption.attr('value', attr.resetUrl);\n\n    attr.values.forEach(function (attrValue) {\n        var $attrValue = $productContainer\n            .find($attr + ' [data-attr-value=\"' + attrValue.value + '\"]');\n        $attrValue.attr('value', attrValue.url)\n            .removeAttr('disabled');\n\n        if (!attrValue.selectable) {\n            $attrValue.attr('disabled', true);\n        }\n    });\n}\n\n/**\n * Routes the handling of attribute processing depending on whether the attribute has image\n *     swatches or not\n *\n * @param {Object} attrs - Attribute\n * @param {string} attr.id - Attribute ID\n * @param {jQuery} $productContainer - DOM element for a given product\n * @param {Object} msgs - object containing resource messages\n */\nfunction updateAttrs(attrs, $productContainer, msgs) {\n    // Currently, the only attribute type that has image swatches is Color.\n    var attrsWithSwatches = ['color'];\n\n    attrs.forEach(function (attr) {\n        if (attrsWithSwatches.indexOf(attr.id) > -1) {\n            processSwatchValues(attr, $productContainer, msgs);\n        } else {\n            processNonSwatchValues(attr, $productContainer);\n        }\n    });\n}\n\n/**\n * Updates the availability status in the Product Detail Page\n *\n * @param {Object} response - Ajax response object after an\n *                            attribute value has been [de]selected\n * @param {jQuery} $productContainer - DOM element for a given product\n */\nfunction updateAvailability(response, $productContainer) {\n    var availabilityValue = '';\n    var availabilityMessages = response.product.availability.messages;\n    if (!response.product.readyToOrder) {\n        availabilityValue = '<li><div>' + response.resources.info_selectforstock + '</div></li>';\n    } else {\n        availabilityMessages.forEach(function (message) {\n            availabilityValue += '<li><div>' + message + '</div></li>';\n        });\n    }\n\n    $($productContainer).trigger('product:updateAvailability', {\n        product: response.product,\n        $productContainer: $productContainer,\n        message: availabilityValue,\n        resources: response.resources\n    });\n}\n\n/**\n * Generates html for product attributes section\n *\n * @param {array} attributes - list of attributes\n * @return {string} - Compiled HTML\n */\nfunction getAttributesHtml(attributes) {\n    if (!attributes) {\n        return '';\n    }\n\n    var html = '';\n\n    attributes.forEach(function (attributeGroup) {\n        if (attributeGroup.ID === 'mainAttributes') {\n            attributeGroup.attributes.forEach(function (attribute) {\n                html += '<div class=\"attribute-values\">' + attribute.label + ': '\n                    + attribute.value + '</div>';\n            });\n        }\n    });\n\n    return html;\n}\n\n/**\n * @typedef UpdatedOptionValue\n * @type Object\n * @property {string} id - Option value ID for look up\n * @property {string} url - Updated option value selection URL\n */\n\n/**\n * @typedef OptionSelectionResponse\n * @type Object\n * @property {string} priceHtml - Updated price HTML code\n * @property {Object} options - Updated Options\n * @property {string} options.id - Option ID\n * @property {UpdatedOptionValue[]} options.values - Option values\n */\n\n/**\n * Updates DOM using post-option selection Ajax response\n *\n * @param {OptionSelectionResponse} optionsHtml - Ajax response optionsHtml from selecting a product option\n * @param {jQuery} $productContainer - DOM element for current product\n */\nfunction updateOptions(optionsHtml, $productContainer) {\n\t// Update options\n    $productContainer.find('.product-options').empty().html(optionsHtml);\n}\n\n/**\n * Dynamically creates Bootstrap carousel from response containing images\n * @param {Object[]} imgs - Array of large product images,along with related information\n * @param {jQuery} $productContainer - DOM element for a given product\n */\nfunction createCarousel(imgs, $productContainer) {\n    var carousel = $productContainer.find('.carousel');\n    $(carousel).carousel('dispose');\n    var carouselId = $(carousel).attr('id');\n    $(carousel).empty().append('<ol class=\"carousel-indicators\"></ol><div class=\"carousel-inner\" role=\"listbox\"></div><a class=\"carousel-control-prev\" href=\"#' + carouselId + '\" role=\"button\" data-slide=\"prev\"><span class=\"fa icon-prev\" aria-hidden=\"true\"></span><span class=\"sr-only\">' + $(carousel).data('prev') + '</span></a><a class=\"carousel-control-next\" href=\"#' + carouselId + '\" role=\"button\" data-slide=\"next\"><span class=\"fa icon-next\" aria-hidden=\"true\"></span><span class=\"sr-only\">' + $(carousel).data('next') + '</span></a>');\n    for (var i = 0; i < imgs.length; i++) {\n        $('<div class=\"carousel-item\"><img src=\"' + imgs[i].url + '\" class=\"d-block img-fluid\" alt=\"' + imgs[i].alt + ' image number ' + parseInt(imgs[i].index, 10) + '\" title=\"' + imgs[i].title + '\" itemprop=\"image\" /></div>').appendTo($(carousel).find('.carousel-inner'));\n        $('<li data-target=\"#' + carouselId + '\" data-slide-to=\"' + i + '\" class=\"\"></li>').appendTo($(carousel).find('.carousel-indicators'));\n    }\n    $($(carousel).find('.carousel-item')).first().addClass('active');\n    $($(carousel).find('.carousel-indicators > li')).first().addClass('active');\n    if (imgs.length === 1) {\n        $($(carousel).find('.carousel-indicators, a[class^=\"carousel-control-\"]')).detach();\n    }\n    $(carousel).carousel();\n    $($(carousel).find('.carousel-indicators')).attr('aria-hidden', true);\n}\n\n/**\n * Parses JSON from Ajax call made whenever an attribute value is [de]selected\n * @param {Object} response - response from Ajax call\n * @param {Object} response.product - Product object\n * @param {string} response.product.id - Product ID\n * @param {Object[]} response.product.variationAttributes - Product attributes\n * @param {Object[]} response.product.images - Product images\n * @param {boolean} response.product.hasRequiredAttrsSelected - Flag as to whether all required\n *     attributes have been selected.  Used partially to\n *     determine whether the Add to Cart button can be enabled\n * @param {jQuery} $productContainer - DOM element for a given product.\n */\nfunction handleVariantResponse(response, $productContainer) {\n    var isChoiceOfBonusProducts =\n        $productContainer.parents('.choose-bonus-product-dialog').length > 0;\n    var isVaraint;\n    if (response.product.variationAttributes) {\n        updateAttrs(response.product.variationAttributes, $productContainer, response.resources);\n        isVaraint = response.product.productType === 'variant';\n        if (isChoiceOfBonusProducts && isVaraint) {\n            $productContainer.parent('.bonus-product-item')\n                .data('pid', response.product.id);\n\n            $productContainer.parent('.bonus-product-item')\n                .data('ready-to-order', response.product.readyToOrder);\n        }\n    }\n\n    // Update primary images\n    var primaryImageUrls = response.product.images.large;\n    createCarousel(primaryImageUrls, $productContainer);\n\n    // Update pricing\n    if (!isChoiceOfBonusProducts) {\n        var $priceSelector = $('.prices .price', $productContainer).length\n            ? $('.prices .price', $productContainer)\n            : $('.prices .price');\n        $priceSelector.replaceWith(response.product.price.html);\n    }\n\n    // Update promotions\n    $productContainer.find('.promotions').empty().html(response.product.promotionsHtml);\n\n    updateAvailability(response, $productContainer);\n\n    if (isChoiceOfBonusProducts) {\n        var $selectButton = $productContainer.find('.select-bonus-product');\n        $selectButton.trigger('bonusproduct:updateSelectButton', {\n            product: response.product, $productContainer: $productContainer\n        });\n    } else {\n        // Enable \"Add to Cart\" button if all required attributes have been selected\n        $('button.add-to-cart, button.add-to-cart-global, button.update-cart-product-global').trigger('product:updateAddToCart', {\n            product: response.product, $productContainer: $productContainer\n        }).trigger('product:statusUpdate', response.product);\n    }\n\n    // Update attributes\n    $productContainer.find('.main-attributes').empty()\n        .html(getAttributesHtml(response.product.attributes));\n}\n\n/**\n * @typespec UpdatedQuantity\n * @type Object\n * @property {boolean} selected - Whether the quantity has been selected\n * @property {string} value - The number of products to purchase\n * @property {string} url - Compiled URL that specifies variation attributes, product ID, options,\n *     etc.\n */\n\n/**\n * Updates the quantity DOM elements post Ajax call\n * @param {UpdatedQuantity[]} quantities -\n * @param {jQuery} $productContainer - DOM container for a given product\n */\nfunction updateQuantities(quantities, $productContainer) {\n    if (!($productContainer.parent('.bonus-product-item').length > 0)) {\n        var optionsHtml = quantities.map(function (quantity) {\n            var selected = quantity.selected ? ' selected ' : '';\n            return '<option value=\"' + quantity.value + '\"  data-url=\"' + quantity.url + '\"' +\n                selected + '>' + quantity.value + '</option>';\n        }).join('');\n        getQuantitySelector($productContainer).empty().html(optionsHtml);\n    }\n}\n\n/**\n * updates the product view when a product attribute is selected or deselected or when\n *         changing quantity\n * @param {string} selectedValueUrl - the Url for the selected variation value\n * @param {jQuery} $productContainer - DOM element for current product\n */\nfunction attributeSelect(selectedValueUrl, $productContainer) {\n    if (selectedValueUrl) {\n        $('body').trigger('product:beforeAttributeSelect',\n            { url: selectedValueUrl, container: $productContainer });\n\n        $.ajax({\n            url: selectedValueUrl,\n            method: 'GET',\n            success: function (data) {\n                handleVariantResponse(data, $productContainer);\n                updateOptions(data.product.optionsHtml, $productContainer);\n                updateQuantities(data.product.quantities, $productContainer);\n                $('body').trigger('product:afterAttributeSelect',\n                    { data: data, container: $productContainer });\n                $.spinner().stop();\n            },\n            error: function () {\n                $.spinner().stop();\n            }\n        });\n    }\n}\n\n/**\n * Retrieves url to use when adding a product to the cart\n *\n * @return {string} - The provided URL to use when adding a product to the cart\n */\nfunction getAddToCartUrl() {\n    return $('.add-to-cart-url').val();\n}\n\n/**\n * Parses the html for a modal window\n * @param {string} html - representing the body and footer of the modal window\n *\n * @return {Object} - Object with properties body and footer.\n */\nfunction parseHtml(html) {\n    var $html = $('<div>').append($.parseHTML(html));\n\n    var body = $html.find('.choice-of-bonus-product');\n    var footer = $html.find('.modal-footer').children();\n\n    return { body: body, footer: footer };\n}\n\n/**\n * Retrieves url to use when adding a product to the cart\n *\n * @param {Object} data - data object used to fill in dynamic portions of the html\n */\nfunction chooseBonusProducts(data) {\n    $('.modal-body').spinner().start();\n\n    if ($('#chooseBonusProductModal').length !== 0) {\n        $('#chooseBonusProductModal').remove();\n    }\n    var bonusUrl;\n    if (data.bonusChoiceRuleBased) {\n        bonusUrl = data.showProductsUrlRuleBased;\n    } else {\n        bonusUrl = data.showProductsUrlListBased;\n    }\n\n    var htmlString = '<!-- Modal -->'\n        + '<div class=\"modal fade\" id=\"chooseBonusProductModal\" tabindex=\"-1\" role=\"dialog\">'\n        + '<span class=\"enter-message sr-only\" ></span>'\n        + '<div class=\"modal-dialog choose-bonus-product-dialog\" '\n        + 'data-total-qty=\"' + data.maxBonusItems + '\"'\n        + 'data-UUID=\"' + data.uuid + '\"'\n        + 'data-pliUUID=\"' + data.pliUUID + '\"'\n        + 'data-addToCartUrl=\"' + data.addToCartUrl + '\"'\n        + 'data-pageStart=\"0\"'\n        + 'data-pageSize=\"' + data.pageSize + '\"'\n        + 'data-moreURL=\"' + data.showProductsUrlRuleBased + '\"'\n        + 'data-bonusChoiceRuleBased=\"' + data.bonusChoiceRuleBased + '\">'\n        + '<!-- Modal content-->'\n        + '<div class=\"modal-content\">'\n        + '<div class=\"modal-header\">'\n        + '    <span class=\"\">' + data.labels.selectprods + '</span>'\n        + '    <button type=\"button\" class=\"close pull-right\" data-dismiss=\"modal\">'\n        + '        <span aria-hidden=\"true\">&times;</span>'\n        + '        <span class=\"sr-only\"> </span>'\n        + '    </button>'\n        + '</div>'\n        + '<div class=\"modal-body\"></div>'\n        + '<div class=\"modal-footer\"></div>'\n        + '</div>'\n        + '</div>'\n        + '</div>';\n    $('body').append(htmlString);\n    $('.modal-body').spinner().start();\n\n    $.ajax({\n        url: bonusUrl,\n        method: 'GET',\n        dataType: 'json',\n        success: function (response) {\n            var parsedHtml = parseHtml(response.renderedTemplate);\n            $('#chooseBonusProductModal .modal-body').empty();\n            $('#chooseBonusProductModal .enter-message').text(response.enterDialogMessage);\n            $('#chooseBonusProductModal .modal-header .close .sr-only').text(response.closeButtonText);\n            $('#chooseBonusProductModal .modal-body').html(parsedHtml.body);\n            $('#chooseBonusProductModal .modal-footer').html(parsedHtml.footer);\n            $('#chooseBonusProductModal').modal('show');\n            $.spinner().stop();\n        },\n        error: function () {\n            $.spinner().stop();\n        }\n    });\n}\n\n/**\n * Updates the Mini-Cart quantity value after the customer has pressed the \"Add to Cart\" button\n * @param {string} response - ajax response from clicking the add to cart button\n */\nfunction handlePostCartAdd(response) {\n    $('.minicart').trigger('count:update', response);\n    var messageType = response.error ? 'alert-danger' : 'alert-success';\n    // show add to cart toast\n    if (response.newBonusDiscountLineItem\n        && Object.keys(response.newBonusDiscountLineItem).length !== 0) {\n        chooseBonusProducts(response.newBonusDiscountLineItem);\n    } else {\n        if ($('.add-to-cart-messages').length === 0) {\n            $('body').append(\n                '<div class=\"add-to-cart-messages\"></div>'\n            );\n        }\n\n        $('.add-to-cart-messages').append(\n            '<div class=\"alert ' + messageType + ' add-to-basket-alert text-center\" role=\"alert\">'\n            + response.message\n            + '</div>'\n        );\n\n        setTimeout(function () {\n            $('.add-to-basket-alert').remove();\n        }, 5000);\n    }\n}\n\n/**\n * Retrieves the bundle product item ID's for the Controller to replace bundle master product\n * items with their selected variants\n *\n * @return {string[]} - List of selected bundle product item ID's\n */\nfunction getChildProducts() {\n    var childProducts = [];\n    $('.bundle-item').each(function () {\n        childProducts.push({\n            pid: $(this).find('.product-id').text(),\n            quantity: parseInt($(this).find('label.quantity').data('quantity'), 10)\n        });\n    });\n\n    return childProducts.length ? JSON.stringify(childProducts) : [];\n}\n\n/**\n * Retrieve product options\n *\n * @param {jQuery} $productContainer - DOM element for current product\n * @return {string} - Product options and their selected values\n */\nfunction getOptions($productContainer) {\n    var options = $productContainer\n        .find('.product-option')\n        .map(function () {\n            var $elOption = $(this).find('.options-select');\n            var urlValue = $elOption.val();\n            var selectedValueId = $elOption.find('option[value=\"' + urlValue + '\"]')\n                .data('value-id');\n            return {\n                optionId: $(this).data('option-id'),\n                selectedValueId: selectedValueId\n            };\n        }).toArray();\n\n    return JSON.stringify(options);\n}\n\n/**\n * Makes a call to the server to report the event of adding an item to the cart\n *\n * @param {string | boolean} url - a string representing the end point to hit so that the event can be recorded, or false\n */\nfunction miniCartReportingUrl(url) {\n    if (url) {\n        $.ajax({\n            url: url,\n            method: 'GET',\n            success: function () {\n                // reporting urls hit on the server\n            },\n            error: function () {\n                // no reporting urls hit on the server\n            }\n        });\n    }\n}\n\nmodule.exports = {\n    attributeSelect: attributeSelect,\n    methods: {\n        editBonusProducts: function (data) {\n            chooseBonusProducts(data);\n        }\n    },\n\n    focusChooseBonusProductModal: function () {\n        $('body').on('shown.bs.modal', '#chooseBonusProductModal', function () {\n            $('#chooseBonusProductModal').siblings().attr('aria-hidden', 'true');\n            $('#chooseBonusProductModal .close').focus();\n        });\n    },\n\n    onClosingChooseBonusProductModal: function () {\n        $('body').on('hidden.bs.modal', '#chooseBonusProductModal', function () {\n            $('#chooseBonusProductModal').siblings().attr('aria-hidden', 'false');\n        });\n    },\n\n    trapChooseBonusProductModalFocus: function () {\n        $('body').on('keydown', '#chooseBonusProductModal', function (e) {\n            var focusParams = {\n                event: e,\n                containerSelector: '#chooseBonusProductModal',\n                firstElementSelector: '.close',\n                lastElementSelector: '.add-bonus-products'\n            };\n            focusHelper.setTabNextFocus(focusParams);\n        });\n    },\n\n    colorAttribute: function () {\n        $(document).on('click', '[data-attr=\"color\"] button', function (e) {\n            e.preventDefault();\n\n            if ($(this).attr('disabled')) {\n                return;\n            }\n            var $productContainer = $(this).closest('.set-item');\n            if (!$productContainer.length) {\n                $productContainer = $(this).closest('.product-detail');\n            }\n\n            attributeSelect($(this).attr('data-url'), $productContainer);\n        });\n    },\n\n    selectAttribute: function () {\n        $(document).on('change', 'select[class*=\"select-\"], .options-select', function (e) {\n            e.preventDefault();\n\n            var $productContainer = $(this).closest('.set-item');\n            if (!$productContainer.length) {\n                $productContainer = $(this).closest('.product-detail');\n            }\n            attributeSelect(e.currentTarget.value, $productContainer);\n        });\n    },\n\n    availability: function () {\n        $(document).on('change', '.quantity-select', function (e) {\n            e.preventDefault();\n\n            var $productContainer = $(this).closest('.product-detail');\n            if (!$productContainer.length) {\n                $productContainer = $(this).closest('.modal-content').find('.product-quickview');\n            }\n\n            if ($('.bundle-items', $productContainer).length === 0) {\n                attributeSelect($(e.currentTarget).find('option:selected').data('url'),\n                    $productContainer);\n            }\n        });\n    },\n\n    addToCart: function () {\n        $(document).on('click', 'button.add-to-cart, button.add-to-cart-global', function () {\n            var addToCartUrl;\n            var pid;\n            var pidsObj;\n            var setPids;\n\n            $('body').trigger('product:beforeAddToCart', this);\n\n            if ($('.set-items').length && $(this).hasClass('add-to-cart-global')) {\n                setPids = [];\n\n                $('.product-detail').each(function () {\n                    if (!$(this).hasClass('product-set-detail')) {\n                        setPids.push({\n                            pid: $(this).find('.product-id').text(),\n                            qty: $(this).find('.quantity-select').val(),\n                            options: getOptions($(this))\n                        });\n                    }\n                });\n                pidsObj = JSON.stringify(setPids);\n            }\n\n            pid = getPidValue($(this));\n\n            var $productContainer = $(this).closest('.product-detail');\n            if (!$productContainer.length) {\n                $productContainer = $(this).closest('.quick-view-dialog').find('.product-detail');\n            }\n\n            addToCartUrl = getAddToCartUrl();\n\n            var form = {\n                pid: pid,\n                pidsObj: pidsObj,\n                childProducts: getChildProducts(),\n                quantity: getQuantitySelected($(this))\n            };\n\n            if (!$('.bundle-item').length) {\n                form.options = getOptions($productContainer);\n            }\n\n            $(this).trigger('updateAddToCartFormData', form);\n            if (addToCartUrl) {\n                $.ajax({\n                    url: addToCartUrl,\n                    method: 'POST',\n                    data: form,\n                    success: function (data) {\n                        handlePostCartAdd(data);\n                        $('body').trigger('product:afterAddToCart', data);\n                        $.spinner().stop();\n                        miniCartReportingUrl(data.reportingURL);\n                    },\n                    error: function () {\n                        $.spinner().stop();\n                    }\n                });\n            }\n        });\n    },\n    selectBonusProduct: function () {\n        $(document).on('click', '.select-bonus-product', function () {\n            var $choiceOfBonusProduct = $(this).parents('.choice-of-bonus-product');\n            var pid = $(this).data('pid');\n            var maxPids = $('.choose-bonus-product-dialog').data('total-qty');\n            var submittedQty = parseInt($choiceOfBonusProduct.find('.bonus-quantity-select').val(), 10);\n            var totalQty = 0;\n            $.each($('#chooseBonusProductModal .selected-bonus-products .selected-pid'), function () {\n                totalQty += $(this).data('qty');\n            });\n            totalQty += submittedQty;\n            var optionID = $choiceOfBonusProduct.find('.product-option').data('option-id');\n            var valueId = $choiceOfBonusProduct.find('.options-select option:selected').data('valueId');\n            if (totalQty <= maxPids) {\n                var selectedBonusProductHtml = ''\n                + '<div class=\"selected-pid row\" '\n                + 'data-pid=\"' + pid + '\"'\n                + 'data-qty=\"' + submittedQty + '\"'\n                + 'data-optionID=\"' + (optionID || '') + '\"'\n                + 'data-option-selected-value=\"' + (valueId || '') + '\"'\n                + '>'\n                + '<div class=\"col-sm-11 col-9 bonus-product-name\" >'\n                + $choiceOfBonusProduct.find('.product-name').html()\n                + '</div>'\n                + '<div class=\"col-1\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></div>'\n                + '</div>'\n                ;\n                $('#chooseBonusProductModal .selected-bonus-products').append(selectedBonusProductHtml);\n                $('.pre-cart-products').html(totalQty);\n                $('.selected-bonus-products .bonus-summary').removeClass('alert-danger');\n            } else {\n                $('.selected-bonus-products .bonus-summary').addClass('alert-danger');\n            }\n        });\n    },\n    removeBonusProduct: function () {\n        $(document).on('click', '.selected-pid', function () {\n            $(this).remove();\n            var $selected = $('#chooseBonusProductModal .selected-bonus-products .selected-pid');\n            var count = 0;\n            if ($selected.length) {\n                $selected.each(function () {\n                    count += parseInt($(this).data('qty'), 10);\n                });\n            }\n\n            $('.pre-cart-products').html(count);\n            $('.selected-bonus-products .bonus-summary').removeClass('alert-danger');\n        });\n    },\n    enableBonusProductSelection: function () {\n        $('body').on('bonusproduct:updateSelectButton', function (e, response) {\n            $('button.select-bonus-product', response.$productContainer).attr('disabled',\n                (!response.product.readyToOrder || !response.product.available));\n            var pid = response.product.id;\n            $('button.select-bonus-product', response.$productContainer).data('pid', pid);\n        });\n    },\n    showMoreBonusProducts: function () {\n        $(document).on('click', '.show-more-bonus-products', function () {\n            var url = $(this).data('url');\n            $('.modal-content').spinner().start();\n            $.ajax({\n                url: url,\n                method: 'GET',\n                success: function (html) {\n                    var parsedHtml = parseHtml(html);\n                    $('.modal-body').append(parsedHtml.body);\n                    $('.show-more-bonus-products:first').remove();\n                    $('.modal-content').spinner().stop();\n                },\n                error: function () {\n                    $('.modal-content').spinner().stop();\n                }\n            });\n        });\n    },\n    addBonusProductsToCart: function () {\n        $(document).on('click', '.add-bonus-products', function () {\n            var $readyToOrderBonusProducts = $('.choose-bonus-product-dialog .selected-pid');\n            var queryString = '?pids=';\n            var url = $('.choose-bonus-product-dialog').data('addtocarturl');\n            var pidsObject = {\n                bonusProducts: []\n            };\n\n            $.each($readyToOrderBonusProducts, function () {\n                var qtyOption =\n                    parseInt($(this)\n                        .data('qty'), 10);\n\n                var option = null;\n                if (qtyOption > 0) {\n                    if ($(this).data('optionid') && $(this).data('option-selected-value')) {\n                        option = {};\n                        option.optionId = $(this).data('optionid');\n                        option.productId = $(this).data('pid');\n                        option.selectedValueId = $(this).data('option-selected-value');\n                    }\n                    pidsObject.bonusProducts.push({\n                        pid: $(this).data('pid'),\n                        qty: qtyOption,\n                        options: [option]\n                    });\n                    pidsObject.totalQty = parseInt($('.pre-cart-products').html(), 10);\n                }\n            });\n            queryString += JSON.stringify(pidsObject);\n            queryString = queryString + '&uuid=' + $('.choose-bonus-product-dialog').data('uuid');\n            queryString = queryString + '&pliuuid=' + $('.choose-bonus-product-dialog').data('pliuuid');\n            $.spinner().start();\n            $.ajax({\n                url: url + queryString,\n                method: 'POST',\n                success: function (data) {\n                    $.spinner().stop();\n                    if (data.error) {\n                        $('#chooseBonusProductModal').modal('hide');\n                        if ($('.add-to-cart-messages').length === 0) {\n                            $('body').append('<div class=\"add-to-cart-messages\"></div>');\n                        }\n                        $('.add-to-cart-messages').append(\n                            '<div class=\"alert alert-danger add-to-basket-alert text-center\"'\n                            + ' role=\"alert\">'\n                            + data.errorMessage + '</div>'\n                        );\n                        setTimeout(function () {\n                            $('.add-to-basket-alert').remove();\n                        }, 3000);\n                    } else {\n                        $('.configure-bonus-product-attributes').html(data);\n                        $('.bonus-products-step2').removeClass('hidden-xl-down');\n                        $('#chooseBonusProductModal').modal('hide');\n\n                        if ($('.add-to-cart-messages').length === 0) {\n                            $('body').append('<div class=\"add-to-cart-messages\"></div>');\n                        }\n                        $('.minicart-quantity').html(data.totalQty);\n                        $('.add-to-cart-messages').append(\n                            '<div class=\"alert alert-success add-to-basket-alert text-center\"'\n                            + ' role=\"alert\">'\n                            + data.msgSuccess + '</div>'\n                        );\n                        setTimeout(function () {\n                            $('.add-to-basket-alert').remove();\n                            if ($('.cart-page').length) {\n                                location.reload();\n                            }\n                        }, 1500);\n                    }\n                },\n                error: function () {\n                    $.spinner().stop();\n                }\n            });\n        });\n    },\n\n    getPidValue: getPidValue,\n    getQuantitySelected: getQuantitySelected,\n    miniCartReportingUrl: miniCartReportingUrl\n};\n","'use strict';\nvar base = require('./base');\nvar focusHelper = require('../components/focus');\n\n/**\n * Generates the modal window on the first call.\n *\n */\nfunction getModalHtmlElement() {\n    if ($('#quickViewModal').length !== 0) {\n        $('#quickViewModal').remove();\n    }\n    var htmlString = '<!-- Modal -->'\n        + '<div class=\"modal fade\" id=\"quickViewModal\" role=\"dialog\">'\n        + '<span class=\"enter-message sr-only\" ></span>'\n        + '<div class=\"modal-dialog quick-view-dialog\">'\n        + '<!-- Modal content-->'\n        + '<div class=\"modal-content\">'\n        + '<div class=\"modal-header\">'\n        + '    <a class=\"full-pdp-link\" href=\"\"></a>'\n        + '    <button type=\"button\" class=\"close pull-right\" data-dismiss=\"modal\">'\n        + '        <span aria-hidden=\"true\">&times;</span>'\n        + '        <span class=\"sr-only\"> </span>'\n        + '    </button>'\n        + '</div>'\n        + '<div class=\"modal-body\"></div>'\n        + '<div class=\"modal-footer\"></div>'\n        + '</div>'\n        + '</div>'\n        + '</div>';\n    $('body').append(htmlString);\n}\n\n/**\n * @typedef {Object} QuickViewHtml\n * @property {string} body - Main Quick View body\n * @property {string} footer - Quick View footer content\n */\n\n/**\n * Parse HTML code in Ajax response\n *\n * @param {string} html - Rendered HTML from quickview template\n * @return {QuickViewHtml} - QuickView content components\n */\nfunction parseHtml(html) {\n    var $html = $('<div>').append($.parseHTML(html));\n\n    var body = $html.find('.product-quickview');\n    var footer = $html.find('.modal-footer').children();\n\n    return { body: body, footer: footer };\n}\n\n/**\n * replaces the content in the modal window on for the selected product variation.\n * @param {string} selectedValueUrl - url to be used to retrieve a new product model\n */\nfunction fillModalElement(selectedValueUrl) {\n    $('.modal-body').spinner().start();\n    $.ajax({\n        url: selectedValueUrl,\n        method: 'GET',\n        dataType: 'json',\n        success: function (data) {\n            var parsedHtml = parseHtml(data.renderedTemplate);\n\n            $('.modal-body').empty();\n            $('.modal-body').html(parsedHtml.body);\n            $('.modal-footer').html(parsedHtml.footer);\n            $('.full-pdp-link').text(data.quickViewFullDetailMsg);\n            $('#quickViewModal .full-pdp-link').attr('href', data.productUrl);\n            $('#quickViewModal .size-chart').attr('href', data.productUrl);\n            $('#quickViewModal .modal-header .close .sr-only').text(data.closeButtonText);\n            $('#quickViewModal .enter-message').text(data.enterDialogMessage);\n            $('#quickViewModal').modal('show');\n\n            $.spinner().stop();\n        },\n        error: function () {\n            $.spinner().stop();\n        }\n    });\n}\n\nmodule.exports = {\n    showQuickview: function () {\n        $('body').on('click', '.quickview', function (e) {\n            e.preventDefault();\n            var selectedValueUrl = $(this).closest('a.quickview').attr('href');\n            $(e.target).trigger('quickview:show');\n            getModalHtmlElement();\n            fillModalElement(selectedValueUrl);\n        });\n    },\n    focusQuickview: function () {\n        $('body').on('shown.bs.modal', '#quickViewModal', function () {\n            $('#quickViewModal .close').focus();\n        });\n    },\n    trapQuickviewFocus: function () {\n        $('body').on('keydown', '#quickViewModal', function (e) {\n            var focusParams = {\n                event: e,\n                containerSelector: '#quickViewModal',\n                firstElementSelector: '.full-pdp-link',\n                lastElementSelector: '.add-to-cart-global',\n                nextToLastElementSelector: '.modal-footer .quantity-select'\n            };\n            focusHelper.setTabNextFocus(focusParams);\n        });\n    },\n    availability: base.availability,\n    addToCart: base.addToCart,\n    showSpinner: function () {\n        $('body').on('product:beforeAddToCart', function (e, data) {\n            $(data).closest('.modal-content').spinner().start();\n        });\n    },\n    hideDialog: function () {\n        $('body').on('product:afterAddToCart', function () {\n            $('#quickViewModal').modal('hide');\n        });\n    },\n    beforeUpdateAttribute: function () {\n        $('body').on('product:beforeAttributeSelect', function () {\n            $('.modal.show .modal-content').spinner().start();\n        });\n    },\n    updateAttribute: function () {\n        $('body').on('product:afterAttributeSelect', function (e, response) {\n            if ($('.modal.show .product-quickview>.bundle-items').length) {\n                $('.modal.show').find(response.container).data('pid', response.data.product.id);\n                $('.modal.show').find(response.container)\n                    .find('.product-id').text(response.data.product.id);\n            } else if ($('.set-items').length) {\n                response.container.find('.product-id').text(response.data.product.id);\n            } else {\n                $('.modal.show .product-quickview').data('pid', response.data.product.id);\n                $('.modal.show .full-pdp-link')\n                    .attr('href', response.data.product.selectedProductUrl);\n            }\n        });\n    },\n    updateAddToCart: function () {\n        $('body').on('product:updateAddToCart', function (e, response) {\n            // update local add to cart (for sets)\n            $('button.add-to-cart', response.$productContainer).attr('disabled',\n                (!response.product.readyToOrder || !response.product.available));\n\n            // update global add to cart (single products, bundles)\n            var dialog = $(response.$productContainer)\n                .closest('.quick-view-dialog');\n\n            $('.add-to-cart-global', dialog).attr('disabled',\n                !$('.global-availability', dialog).data('ready-to-order')\n                || !$('.global-availability', dialog).data('available')\n            );\n        });\n    },\n    updateAvailability: function () {\n        $('body').on('product:updateAvailability', function (e, response) {\n            // bundle individual products\n            $('.product-availability', response.$productContainer)\n                .data('ready-to-order', response.product.readyToOrder)\n                .data('available', response.product.available)\n                .find('.availability-msg')\n                .empty()\n                .html(response.message);\n\n\n            var dialog = $(response.$productContainer)\n                .closest('.quick-view-dialog');\n\n            if ($('.product-availability', dialog).length) {\n                // bundle all products\n                var allAvailable = $('.product-availability', dialog).toArray()\n                    .every(function (item) { return $(item).data('available'); });\n\n                var allReady = $('.product-availability', dialog).toArray()\n                    .every(function (item) { return $(item).data('ready-to-order'); });\n\n                $('.global-availability', dialog)\n                    .data('ready-to-order', allReady)\n                    .data('available', allAvailable);\n\n                $('.global-availability .availability-msg', dialog).empty()\n                    .html(allReady ? response.message : response.resources.info_selectforstock);\n            } else {\n                // single product\n                $('.global-availability', dialog)\n                    .data('ready-to-order', response.product.readyToOrder)\n                    .data('available', response.product.available)\n                    .find('.availability-msg')\n                    .empty()\n                    .html(response.message);\n            }\n        });\n    }\n};\n","'use strict';\n\nvar processInclude = require('./util');\n\n$(document).ready(function () {\n    processInclude(require('./search/search'));\n    processInclude(require('./product/quickView'));\n});\n","'use strict';\n\n/**\n * Update DOM elements with Ajax results\n *\n * @param {Object} $results - jQuery DOM element\n * @param {string} selector - DOM element to look up in the $results\n * @return {undefined}\n */\nfunction updateDom($results, selector) {\n    var $updates = $results.find(selector);\n    $(selector).empty().html($updates.html());\n}\n\n/**\n * Keep refinement panes expanded/collapsed after Ajax refresh\n *\n * @param {Object} $results - jQuery DOM element\n * @return {undefined}\n */\nfunction handleRefinements($results) {\n    $('.refinement.active').each(function () {\n        $(this).removeClass('active');\n        var activeDiv = $results.find('.' + $(this)[0].className.replace(/ /g, '.'));\n        activeDiv.addClass('active');\n        activeDiv.find('button.title').attr('aria-expanded', 'true');\n    });\n\n    updateDom($results, '.refinements');\n}\n\n/**\n * Parse Ajax results and updated select DOM elements\n *\n * @param {string} response - Ajax response HTML code\n * @return {undefined}\n */\nfunction parseResults(response) {\n    var $results = $(response);\n    var specialHandlers = {\n        '.refinements': handleRefinements\n    };\n\n    // Update DOM elements that do not require special handling\n    [\n        '.grid-header',\n        '.header-bar',\n        '.header.page-title',\n        '.product-grid',\n        '.show-more',\n        '.filter-bar'\n    ].forEach(function (selector) {\n        updateDom($results, selector);\n    });\n\n    Object.keys(specialHandlers).forEach(function (selector) {\n        specialHandlers[selector]($results);\n    });\n}\n\n/**\n * This function retrieves another page of content to display in the content search grid\n * @param {JQuery} $element - the jquery element that has the click event attached\n * @param {JQuery} $target - the jquery element that will receive the response\n * @return {undefined}\n */\nfunction getContent($element, $target) {\n    var showMoreUrl = $element.data('url');\n    $.spinner().start();\n    $.ajax({\n        url: showMoreUrl,\n        method: 'GET',\n        success: function (response) {\n            $target.append(response);\n            $.spinner().stop();\n        },\n        error: function () {\n            $.spinner().stop();\n        }\n    });\n}\n\n/**\n * Update sort option URLs from Ajax response\n *\n * @param {string} response - Ajax response HTML code\n * @return {undefined}\n */\nfunction updateSortOptions(response) {\n    var $tempDom = $('<div>').append($(response));\n    var sortOptions = $tempDom.find('.grid-footer').data('sort-options').options;\n    sortOptions.forEach(function (option) {\n        $('option.' + option.id).val(option.url);\n    });\n}\n\nmodule.exports = {\n    filter: function () {\n        // Display refinements bar when Menu icon clicked\n        $('.container').on('click', 'button.filter-results', function () {\n            $('.refinement-bar, .modal-background').show();\n            $('.refinement-bar').siblings().attr('aria-hidden', true);\n            $('.refinement-bar').closest('.row').siblings().attr('aria-hidden', true);\n            $('.refinement-bar').closest('.tab-pane.active').siblings().attr('aria-hidden', true);\n            $('.refinement-bar').closest('.container.search-results').siblings().attr('aria-hidden', true);\n            $('.refinement-bar .close').focus();\n        });\n    },\n\n    closeRefinements: function () {\n        // Refinements close button\n        $('.container').on('click', '.refinement-bar button.close, .modal-background', function () {\n            $('.refinement-bar, .modal-background').hide();\n            $('.refinement-bar').siblings().attr('aria-hidden', false);\n            $('.refinement-bar').closest('.row').siblings().attr('aria-hidden', false);\n            $('.refinement-bar').closest('.tab-pane.active').siblings().attr('aria-hidden', false);\n            $('.refinement-bar').closest('.container.search-results').siblings().attr('aria-hidden', false);\n            $('.btn.filter-results').focus();\n        });\n    },\n\n    resize: function () {\n        // Close refinement bar and hide modal background if user resizes browser\n        $(window).resize(function () {\n            $('.refinement-bar, .modal-background').hide();\n            $('.refinement-bar').siblings().attr('aria-hidden', false);\n            $('.refinement-bar').closest('.row').siblings().attr('aria-hidden', false);\n            $('.refinement-bar').closest('.tab-pane.active').siblings().attr('aria-hidden', false);\n            $('.refinement-bar').closest('.container.search-results').siblings().attr('aria-hidden', false);\n        });\n    },\n\n    sort: function () {\n        // Handle sort order menu selection\n        $('.container').on('change', '[name=sort-order]', function (e) {\n            e.preventDefault();\n\n            $.spinner().start();\n            $(this).trigger('search:sort', this.value);\n            $.ajax({\n                url: this.value,\n                data: { selectedUrl: this.value },\n                method: 'GET',\n                success: function (response) {\n                    $('.product-grid').empty().html(response);\n                    $.spinner().stop();\n                },\n                error: function () {\n                    $.spinner().stop();\n                }\n            });\n        });\n    },\n\n    showMore: function () {\n        // Show more products\n        $('.container').on('click', '.show-more button', function (e) {\n            e.stopPropagation();\n            var showMoreUrl = $(this).data('url');\n\n            e.preventDefault();\n\n            $.spinner().start();\n            $(this).trigger('search:showMore', e);\n            $.ajax({\n                url: showMoreUrl,\n                data: { selectedUrl: showMoreUrl },\n                method: 'GET',\n                success: function (response) {\n                    $('.grid-footer').replaceWith(response);\n                    updateSortOptions(response);\n                    $.spinner().stop();\n                },\n                error: function () {\n                    $.spinner().stop();\n                }\n            });\n        });\n    },\n\n    applyFilter: function () {\n        // Handle refinement value selection and reset click\n        $('.container').on(\n            'click',\n            '.refinements li button, .refinement-bar button.reset, .filter-value button, .swatch-filter button',\n            function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                $.spinner().start();\n                $(this).trigger('search:filter', e);\n                $.ajax({\n                    url: $(this).data('href'),\n                    data: {\n                        page: $('.grid-footer').data('page-number'),\n                        selectedUrl: $(this).data('href')\n                    },\n                    method: 'GET',\n                    success: function (response) {\n                        parseResults(response);\n                        $.spinner().stop();\n                    },\n                    error: function () {\n                        $.spinner().stop();\n                    }\n                });\n            });\n    },\n\n    showContentTab: function () {\n        // Display content results from the search\n        $('.container').on('click', '.content-search', function () {\n            if ($('#content-search-results').html() === '') {\n                getContent($(this), $('#content-search-results'));\n            }\n        });\n\n        // Display the next page of content results from the search\n        $('.container').on('click', '.show-more-content button', function () {\n            getContent($(this), $('#content-search-results'));\n            $('.show-more-content').remove();\n        });\n    }\n};\n","'use strict';\n\nmodule.exports = function (include) {\n    if (typeof include === 'function') {\n        include();\n    } else if (typeof include === 'object') {\n        Object.keys(include).forEach(function (key) {\n            if (typeof include[key] === 'function') {\n                include[key]();\n            }\n        });\n    }\n};\n"],"sourceRoot":""}